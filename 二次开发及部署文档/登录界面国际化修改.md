# 登录界面国际化修改

## 问题描述

登录界面硬编码了英文文本,没有使用项目的国际化框架,导致中文用户体验不佳。

## 解决方案

将登录界面的所有硬编码英文文本替换为使用 react-intl 国际化框架,支持中英文切换。

## 修改内容

### 1. 添加国际化翻译文本

在以下文件中添加了 `auth` 部分的翻译:

- `web/src/locales/zh.json` - 中文翻译
- `web/src/locales/en.json` - 英文翻译

翻译内容包括:
- 登录表单:域、用户名、密码、登录按钮等
- 重置密码表单:新密码、确认密码等
- OTP 验证表单:验证码、验证器应用等
- 错误消息:登录失败、密码不匹配等
- 其他登录选项:微信登录、蓝鲸登录等

### 2. 修改登录相关组件

#### SigninClient.tsx (`web/src/app/(core)/auth/signin/SigninClient.tsx`)

- 导入 `useTranslation` hook
- 使用 `t()` 函数替换所有硬编码的英文文本
- 包括:
  - 表单字段标签(域、用户名、密码)
  - 输入框占位符
  - 按钮文本(登录、登录中...)
  - 加载状态提示
  - 微信/蓝鲸登录按钮
  - 页面标题和副标题
  - 错误消息

#### PasswordResetForm.tsx (`web/src/app/(core)/auth/signin/PasswordResetForm.tsx`)

- 导入 `useTranslation` hook
- 使用 `t()` 函数替换所有硬编码的英文文本
- 包括:
  - 表单字段标签(用户名、新密码、确认密码)
  - 输入框占位符
  - 按钮文本
  - 页面标题和说明
  - 验证错误消息(密码不匹配、密码太短等)

#### OtpVerificationForm.tsx (`web/src/app/(core)/auth/signin/OtpVerificationForm.tsx`)

- 导入 `useTranslation` hook
- 使用 `t()` 函数替换所有硬编码的英文文本
- 包括:
  - 表单字段标签(用户名、验证码)
  - 输入框占位符
  - 按钮文本(验证、验证中...)
  - 页面标题和说明
  - 验证器应用列表
  - 二维码扫描说明
  - 错误消息

#### page.tsx (`web/src/app/(core)/auth/signin/page.tsx`)

- 修改 `signinErrors` 对象,将硬编码的错误消息改为 i18n 键值
- 在 SigninClient 中通过 `t()` 函数翻译这些错误消息

## 翻译键值结构

```json
{
  "auth": {
    "signIn": "登录",
    "username": "用户名",
    "password": "密码",
    ...
    "errors": {
      "default": "无法登录。",
      "signin": "请尝试使用其他帐户登录。",
      ...
    }
  }
}
```

## 效果

修改后,登录界面会根据用户的语言设置显示对应的文本:
- 中文用户看到中文界面
- 英文用户看到英文界面

所有登录相关的文本(包括错误消息、表单标签、按钮等)都已国际化。

## 测试建议

1. 切换系统语言测试界面文本是否正确显示
2. 测试所有表单字段的标签和占位符
3. 测试错误消息的显示
4. 测试密码重置和 OTP 验证流程
5. 测试微信/蓝鲸登录选项的显示

## 相关文件

- `web/src/locales/zh.json`
- `web/src/locales/en.json`
- `web/src/app/(core)/auth/signin/SigninClient.tsx`
- `web/src/app/(core)/auth/signin/PasswordResetForm.tsx`
- `web/src/app/(core)/auth/signin/OtpVerificationForm.tsx`
- `web/src/app/(core)/auth/signin/page.tsx`
- `web/src/utils/i18n.ts` (已存在的国际化工具)

## 日期

2025-10-21
