# 运维控制台定制化修改

## 修改日期
2025-10-19

## 修改目的
将 BKLite 运维控制台定制化为黄埔海关专用版本，包括：
1. 更新控制台首页的标题和描述文本
2. 修复默认语言为中文的问题

## 修改内容

### 1. 运维控制台标题和描述修改

**修改文件**：`web/src/app/ops-console/locales/zh.json`

**修改前**：
```json
{
  "console": "欢迎使用BlueKing Lite控制台",
  "description": "BlueKing Lite是基于人工智能技术的原生运维智能平台。平台包括AI智能分析、运维资产监管等功能，帮助全面优化运维管理。"
}
```

**修改后**：
```json
{
  "console": "欢迎使用黄埔海关智能运维控制台",
  "description": "黄埔海关智能运维是基于腾信蓝鲸二次开发的人工智能技术原生运维智能平台。平台包括AI智能分析、运维资产监管等功能，帮助全面优化运维管理。"
}
```

---

**修改文件**：`web/src/app/ops-console/locales/en.json`

**修改前**：
```json
{
  "console": "Wecome to BlueKing Lite Console",
  "description": "BlueKing Lite is a native operation and maintenance intelligent platform based on artificial intelligence technology. The platform includes AI intelligent analysis, operation and maintenance asset supervision and other functions, which help to comprehensively optimize operation and maintenance management."
}
```

**修改后**：
```json
{
  "console": "Welcome to Huangpu Customs Intelligent Operations Console",
  "description": "Huangpu Customs Intelligent Operations is an AI-native operations platform based on secondary development of Tencent BlueKing. The platform includes AI intelligent analysis, operational asset supervision and other functions to help comprehensively optimize operations management."
}
```

### 2. 修复默认语言设置

**修改文件**：`web/src/context/locale.tsx`

**问题描述**：系统默认语言被硬编码为英文 (`'en'`)，导致用户首次访问时显示英文界面。

**修改位置**：

1. 第 14 行 - 初始状态设置：
```typescript
// 修改前
const [locale, setLocale] = useState('en');

// 修改后
const [locale, setLocale] = useState('zh-CN');
```

2. 第 19 行 - localStorage 默认值：
```typescript
// 修改前
const savedLocale = localStorage.getItem('locale') || 'en';

// 修改后
const savedLocale = localStorage.getItem('locale') || 'zh-CN';
```

## 修改影响

### 用户界面变化
- 运维控制台首页 (`http://localhost:3011/ops-console/home`) 左上角显示黄埔海关定制化标题和描述
- 系统默认使用中文界面，无需用户手动切换语言

### 技术影响
- 修改后，Web 服务会自动热重载（Next.js 开发模式）
- 已访问过的用户需要清除浏览器 localStorage 或手动切换语言后才能看到中文默认设置
- 新用户首次访问将直接显示中文界面

## 测试验证

### 验证步骤
1. 清除浏览器缓存和 localStorage：
   ```javascript
   // 在浏览器控制台执行
   localStorage.removeItem('locale');
   location.reload();
   ```

2. 访问运维控制台首页：
   ```
   http://localhost:3011/ops-console/home
   ```

3. 检查左上角标题是否显示：
   - 标题："欢迎使用黄埔海关智能运维控制台"
   - 描述："黄埔海关智能运维是基于腾信蓝鲸二次开发的人工智能技术原生运维智能平台..."

4. 检查页面整体是否使用中文界面

## 相关文件清单

```
web/src/app/ops-console/locales/zh.json          # 中文语言文件
web/src/app/ops-console/locales/en.json          # 英文语言文件
web/src/context/locale.tsx                        # 语言上下文管理
web/src/app/ops-console/(pages)/home/page.tsx    # 控制台首页（引用翻译键）
```

## Git 提交记录

提交信息：
```
feat: 定制化运维控制台为黄埔海关版本并修复默认语言

- 更新控制台标题和描述为黄埔海关定制内容
- 修复系统默认语言为中文（zh-CN）
- 同步更新中英文语言文件
```

## 备注

1. 本次修改为界面文本定制化，不涉及功能逻辑变更
2. 如需恢复原始 BlueKing Lite 品牌，可通过 Git 回退本次提交
3. 未来如需修改其他模块的品牌信息，可参考本文档修改对应模块的 `locales` 文件
